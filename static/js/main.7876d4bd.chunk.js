(this["webpackJsonpreact-interview-starter-ts"]=this["webpackJsonpreact-interview-starter-ts"]||[]).push([[0],{23:function(e,t,a){e.exports=a(49)},29:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n,c=a(0),r=a.n(c),l=a(9),o=a.n(l),i=(a(28),a(29),a(3)),s=a(13),m=a(21),u={isLoggedIn:!0},p=a(19),d={totalPages:0,isLoading:!1,data:[]},g=Object(s.b)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PRODUCTS":return{totalPages:+t.payload.totalPages,isLoading:!1,data:t.payload.data};case"LOADING_PRODUCTS":return Object(p.a)(Object(p.a)({},e),{},{isLoading:t.payload});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":case"LOGOUT":return{isLoggedIn:t.payload};default:return e}}}),E=Object(s.c)(g,Object(s.a)(m.a)),f=a(10),b=function(e){var t=e.children;return r.a.createElement(i.a,null,r.a.createElement(f.a,{store:E},t))},v=a(2),_=function(e){var t=e.className;return r.a.createElement("h2",{style:{fontSize:"1.6rem"},className:t},"join.tsh.io")};!function(e){e.home="/",e.login="/login",e.products="/page/:pageNumber"}(n||(n={}));a(35);var h=function(){var e=Object(v.g)(),t=Object(f.b)();return r.a.createElement("div",{className:"login__wrapper"},r.a.createElement("div",{className:"login__background-img"}),r.a.createElement("div",{className:"login__content"},r.a.createElement("div",{className:"login__header"},r.a.createElement(_,null)),r.a.createElement("div",{className:"login__form"},r.a.createElement("h2",null,"Login"),r.a.createElement("form",{onSubmit:function(){e.push("/"),t({type:"LOGIN",payload:!0})}},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Username:"),r.a.createElement("input",{id:"username",name:"username",type:"text",placeholder:"Enter username"})),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"Password:"),r.a.createElement("input",{id:"password",name:"password",type:"password",placeholder:"Enter password"})),r.a.createElement("button",{className:"btn",type:"submit"},"Log in"),r.a.createElement(i.b,{to:n.login},"Forgot password?")))))},N=a(4),O=a(18),j=a.n(O),y=a(22),k=(a(37),function(e){var t=e.className,a=e.onChange;return r.a.createElement("div",{className:"search-field ".concat(t)},r.a.createElement("input",{type:"text",name:"search",id:"search",placeholder:"Search",onChange:a}),r.a.createElement("i",{className:"search-field__icon"}))}),S=(a(38),function(e){var t=e.name,a=e.id,n=e.label,c=e.onClick;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{type:"checkbox",name:t,id:a,className:"checkbox",onClick:c}),r.a.createElement("label",{htmlFor:a,"data-cy":a+"-label"},n))});function C(e,t){var a=document.getElementById(e);return a||((a=document.createElement("div")).setAttribute("id",e),t&&(a.className=t),document.body.appendChild(a),a)}a(39);var w=function(e){var t=e.isActive,a=e.position,n=e.children;return t?Object(l.createPortal)(r.a.createElement("div",{className:"dropdown",style:a},n),C("dropdown-container")):null},P=(a(40),function(e){var t=e.onToggleActiveFilter,a=e.onTogglePromoFilter,n=e.onChangeSearchValue,l=Object(f.c)((function(e){return e.auth})).isLoggedIn,o=Object(f.b)(),s=Object(c.useState)(!1),m=Object(N.a)(s,2),u=m[0],p=m[1],d=Object(c.useState)({top:0,left:0}),g=Object(N.a)(d,2),E=g[0],b=g[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header__wrapper"},r.a.createElement("div",{className:"container header__content"},r.a.createElement(_,{className:"header__logo"}),r.a.createElement(k,{className:"header__search",onChange:n}),r.a.createElement("div",{className:"header__filters"},r.a.createElement(S,{name:"active-filter",id:"active-filter",label:"Active",onClick:t}),r.a.createElement(S,{name:"promo-filter",id:"promo-filter",label:"Promo",onClick:a})),l?r.a.createElement("button",{className:"user-menu-button",onClick:function(e){var t=e.currentTarget.getBoundingClientRect();b({top:t.bottom,left:t.right-200}),p((function(e){return!e}))}},r.a.createElement("img",{src:"https://i.pravatar.cc/50",alt:"user avatar"})):r.a.createElement(i.b,{to:"/login",className:"btn-outline",style:{justifySelf:"end"}},"Log in"))),r.a.createElement(w,{isActive:u,position:E},r.a.createElement("button",{className:"logout-button",onClick:function(){p(!1),o({type:"LOGOUT",payload:!1})}},"Logout")))}),L=(a(41),function(e){var t=e.rating,a=Object(c.useState)([]),n=Object(N.a)(a,2),l=n[0],o=n[1];return Object(c.useEffect)((function(){for(var e=[],a=0;a<5;a++)e.unshift(r.a.createElement("button",{key:a,className:"star ".concat(a<t?"star--is-marked":"")}));o(e)}),[t]),r.a.createElement("div",{className:"rating"},l)}),T=(a(42),function(e){var t=e.onClick;return Object(l.createPortal)(r.a.createElement("div",{className:"backdrop",onClick:t}),C("backdrop-container"))}),F=(a(43),function(e){var t=e.image,a=e.title,n=e.description,c=e.onClose;return Object(l.createPortal)(r.a.createElement("div",{className:"modal"},r.a.createElement("button",{className:"modal__close-btn",onClick:c}),t&&r.a.createElement("div",{className:"modal__image"},r.a.createElement("img",{src:t,alt:a})),r.a.createElement("h2",{className:"modal__title"},a),r.a.createElement("p",{className:"modal__description"},n),r.a.createElement(T,{onClick:c})),C("modal-container"))}),x=(a(44),function(e){var t=e.isSmall;return r.a.createElement("div",{className:"loading-spinner ".concat(t?"loading-spinner--small":"")})}),I=(a(45),function(e){e.id;var t=e.name,a=e.description,n=e.rating,l=e.image,o=e.promo,i=e.active,s=Object(c.useState)(!1),m=Object(N.a)(s,2),u=m[0],p=m[1],d=Object(c.useState)(!0),g=Object(N.a)(d,2),E=g[0],f=g[1];return r.a.createElement("div",{className:"product"},u&&r.a.createElement(F,{onClose:function(){return p(!1)},image:l,title:t,description:a}),r.a.createElement("div",{className:"product__img"},o&&r.a.createElement("div",{className:"product__label"},"Promo"),E&&r.a.createElement(x,{isSmall:!0}),r.a.createElement("img",{style:{display:E?"none":""},onLoad:function(){return f(!1)},src:l,alt:t})),r.a.createElement("div",{className:"product__content"},r.a.createElement("h3",{className:"product__title"},t),r.a.createElement("p",null,a)),r.a.createElement("div",{className:"product__footer"},r.a.createElement("div",{className:"product__rating"},r.a.createElement(L,{rating:n})),r.a.createElement("button",{onClick:function(){return p((function(e){return!e}))},className:"btn",disabled:!i},i?"Show details":"Unavailable")))}),U=(a(46),function(e){var t=e.page,a=e.totalPages,n=Object(c.useState)([]),l=Object(N.a)(n,2),o=l[0],s=l[1];return Object(c.useEffect)((function(){var e=[];if(a<=6)for(var n=1;n<=a;n++)e.push(r.a.createElement("li",{className:"pagination__element ".concat(t===n?"pagination__element--active":""),key:n},r.a.createElement(i.b,{to:"/page/".concat(n)},n)));else if(a>6&&a-t<5)for(var c=a-5;c<=a;c++)e.push(r.a.createElement("li",{className:"pagination__element ".concat(t===c?"pagination__element--active":""),key:c},r.a.createElement(i.b,{to:"/page/".concat(c)},c)));else if(a>6&&a-t>=5){for(var l=t>1?t-1:1,o=l;o<=l+2;o++)e.push(r.a.createElement("li",{className:"pagination__element ".concat(t===o?"pagination__element--active":""),key:o},r.a.createElement(i.b,{to:"/page/".concat(o)},o)));for(var m=a-2;m<=a;m++)e.push(r.a.createElement("li",{className:"pagination__element ".concat(t===m?"pagination__element--active":""),key:m},r.a.createElement(i.b,{to:"/page/".concat(m)},m)));e.splice(3,0,r.a.createElement("li",{className:"pagination__element",key:"divider"},"..."))}s(e)}),[t,a]),r.a.createElement("div",{className:"container pagination"},r.a.createElement("ul",{className:"pagination__list"},t>1&&r.a.createElement("li",{className:"pagination__element pagination__element--first"},r.a.createElement(i.b,{to:"/page/1"},"First")),o,a!==t&&r.a.createElement("li",{className:"pagination__element pagination__element--last"},r.a.createElement(i.b,{to:"/page/".concat(a)},"Last"))))}),A=(a(47),function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"empty-list"},r.a.createElement("i",{className:"empty-list__icon"}),r.a.createElement("h3",null,"Oops... It's empty here"),r.a.createElement("p",null,"There are no products on the list")))}),G=(a(48),function(){var e=Object(v.g)(),t=Object(f.c)((function(e){return e.products})),a=t.data,n=t.totalPages,l=t.isLoading,o=Object(f.b)(),i=Object(v.h)().pageNumber,s=Object(c.useState)(!1),m=Object(N.a)(s,2),u=m[0],p=m[1],d=Object(c.useState)(!1),g=Object(N.a)(d,2),E=g[0],b=g[1],_=Object(c.useState)(""),h=Object(N.a)(_,2),O=h[0],k=h[1],S=Object(c.useState)(!1),C=Object(N.a)(S,2),w=C[0],L=C[1];return Object(c.useEffect)((function(){if(w||o(function(e,t,a,n){return function(){var c=Object(y.a)(j.a.mark((function c(r){var l,o,i;return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r({type:"LOADING_PRODUCTS",payload:!0}),l=new URLSearchParams([["limit","8"],["page",e]]),t&&l.append("search",t),a&&l.append("active",a.toString()),n&&l.append("promo",n.toString()),c.prev=5,c.next=8,fetch("".concat("https://join-tsh-api-staging.herokuapp.com/","products?").concat(l.toString()));case 8:return o=c.sent,c.next=11,o.json();case 11:if(i=c.sent,o.ok){c.next=14;break}throw new Error("Unexpected error occured");case 14:r({type:"GET_PRODUCTS",payload:{data:i.items,totalPages:i.meta.totalPages}}),c.next=21;break;case 17:c.prev=17,c.t0=c.catch(5),console.log(c.t0),r({type:"LOADING_PRODUCTS",payload:!1});case 21:case"end":return c.stop()}}),c,null,[[5,17]])})));return function(e){return c.apply(this,arguments)}}()}(i,O,u,E)),w){var e=setTimeout((function(){L(!1)}),700);return function(){clearTimeout(e)}}}),[u,E,O,i,o,w]),Object(c.useEffect)((function(){+i>n&&e.push("/page/1")}),[e,i,n]),r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{onToggleActiveFilter:function(){return p((function(e){return!e}))},onTogglePromoFilter:function(){return b((function(e){return!e}))},onChangeSearchValue:function(e){L(!0),k(e.target.value)}}),l?r.a.createElement(x,null):a.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container products__container"},a.map((function(e){return r.a.createElement(I,{key:e.id,id:e.id,name:e.name,description:e.description,rating:e.rating,image:e.image,promo:e.promo,active:e.active})}))),r.a.createElement(U,{page:+i,totalPages:n})):r.a.createElement(A,null))}),D=function(){return r.a.createElement(v.d,null,r.a.createElement(v.b,{path:n.login,component:h}),r.a.createElement(v.b,{path:n.products,component:G}),r.a.createElement(v.a,{from:n.home,to:"/page/1",exact:!0}),r.a.createElement(v.a,{to:n.home}))},R=function(){return r.a.createElement(D,null)};o.a.render(r.a.createElement(b,null,r.a.createElement(R,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.7876d4bd.chunk.js.map